{"version":3,"file":"sqlite.formatter.js","names":["reservedFunctions","scalar","aggregate","datetime","reservedKeywords","reservedCommands","reservedBinaryCommands","reservedJoins","reservedDependentClauses","SqliteFormatter","Tokenizer","dedupe","Object","values","flat","stringTypes","quote","prefixes","identTypes","positionalParams","numberedParamTypes","namedParamTypes","operators","Formatter"],"sources":["../../src/languages/sqlite.formatter.ts"],"sourcesContent":["import Formatter from 'src/formatter/Formatter';\nimport Tokenizer from 'src/lexer/Tokenizer';\nimport { dedupe } from 'src/utils';\n\nconst reservedFunctions = {\n  // https://www.sqlite.org/lang_corefunc.html\n  scalar: [\n    'ABS',\n    'CHANGES',\n    'CHAR',\n    'COALESCE',\n    'FORMAT',\n    'GLOB',\n    'HEX',\n    'IFNULL',\n    'IIF',\n    'INSTR',\n    'LAST_INSERT_ROWID',\n    'LENGTH',\n    'LIKE',\n    'LIKELIHOOD',\n    'LIKELY',\n    'LOAD_EXTENSION',\n    'LOWER',\n    'LTRIM',\n    'NULLIF',\n    'PRINTF',\n    'QUOTE',\n    'RANDOM',\n    'RANDOMBLOB',\n    'REPLACE',\n    'ROUND',\n    'RTRIM',\n    'SIGN',\n    'SOUNDEX',\n    'SQLITE_COMPILEOPTION_GET',\n    'SQLITE_COMPILEOPTION_USED',\n    'SQLITE_OFFSET',\n    'SQLITE_SOURCE_ID',\n    'SQLITE_VERSION',\n    'SUBSTR',\n    'SUBSTRING',\n    'TOTAL_CHANGES',\n    'TRIM',\n    'TYPEOF',\n    'UNICODE',\n    'UNLIKELY',\n    'UPPER',\n    'ZEROBLOB',\n  ],\n  // https://www.sqlite.org/lang_aggfunc.html\n  aggregate: ['AVG', 'COUNT', 'GROUP_CONCAT', 'MAX', 'MIN', 'SUM', 'TOTAL'],\n  // https://www.sqlite.org/lang_datefunc.html\n  datetime: ['DATE', 'TIME', 'DATETIME', 'JULIANDAY', 'UNIXEPOCH', 'STRFTIME'],\n};\n\n// https://www.sqlite.org/lang_keywords.html\nconst reservedKeywords = [\n  'ABORT',\n  'ACTION',\n  'ADD',\n  'AFTER',\n  'ALL',\n  'ALTER',\n  // 'AND',\n  'ANY',\n  'ARE',\n  'ARRAY',\n  'ALWAYS',\n  'ANALYZE',\n  'AS',\n  'ASC',\n  'ATTACH',\n  'AUTOINCREMENT',\n  'BEFORE',\n  'BEGIN',\n  'BETWEEN',\n  'BY',\n  'CASCADE',\n  'CASE',\n  'CAST',\n  'CHECK',\n  'COLLATE',\n  'COLUMN',\n  'COMMIT',\n  'CONFLICT',\n  'CONSTRAINT',\n  'CREATE',\n  'CROSS',\n  'CURRENT',\n  'CURRENT_DATE',\n  'CURRENT_TIME',\n  'CURRENT_TIMESTAMP',\n  'DATABASE',\n  'DEFAULT',\n  'DEFERRABLE',\n  'DEFERRED',\n  'DELETE',\n  'DESC',\n  'DETACH',\n  'DISTINCT',\n  'DO',\n  'DROP',\n  'EACH',\n  'ELSE',\n  'END',\n  'ESCAPE',\n  'EXCEPT',\n  'EXCLUDE',\n  'EXCLUSIVE',\n  'EXISTS',\n  'EXPLAIN',\n  'FAIL',\n  'FILTER',\n  'FIRST',\n  'FOLLOWING',\n  'FOR',\n  'FOREIGN',\n  'FROM',\n  'FULL',\n  'GENERATED',\n  'GLOB',\n  'GROUP',\n  'GROUPS',\n  'HAVING',\n  'IF',\n  'IGNORE',\n  'IMMEDIATE',\n  'IN',\n  'INDEX',\n  'INDEXED',\n  'INITIALLY',\n  'INNER',\n  'INSERT',\n  'INSTEAD',\n  'INTERSECT',\n  'INTO',\n  'IS',\n  'ISNULL',\n  'JOIN',\n  'KEY',\n  'LAST',\n  'LEFT',\n  'LIKE',\n  'LIMIT',\n  'MATCH',\n  'MATERIALIZED',\n  'NATURAL',\n  'NO',\n  'NOT',\n  'NOTHING',\n  'NOTNULL',\n  'NULL',\n  'NULLS',\n  'OF',\n  'OFFSET',\n  'ON DELETE',\n  'ON UPDATE',\n  'ONLY',\n  'OPEN',\n  // 'OR',\n  'ORDER',\n  'OTHERS',\n  'OUTER',\n  'OVER',\n  'PARTITION',\n  'PLAN',\n  'PRAGMA',\n  'PRECEDING',\n  'PRIMARY',\n  'QUERY',\n  'RAISE',\n  'RANGE',\n  'RECURSIVE',\n  'REFERENCES',\n  'REGEXP',\n  'REINDEX',\n  'RELEASE',\n  'RENAME',\n  'REPLACE',\n  'RESTRICT',\n  'RETURNING',\n  'RIGHT',\n  'ROLLBACK',\n  'ROW',\n  'ROWS',\n  'SAVEPOINT',\n  'SELECT',\n  'SET',\n  'TABLE',\n  'TEMP',\n  'TEMPORARY',\n  'THEN',\n  'TIES',\n  'TO',\n  'TRANSACTION',\n  'TRIGGER',\n  'UNBOUNDED',\n  'UNION',\n  'UNIQUE',\n  'UPDATE',\n  'USING',\n  'VACUUM',\n  'VALUES',\n  'VIEW',\n  'VIRTUAL',\n  'WHEN',\n  'WHERE',\n  'WINDOW',\n  'WITH',\n  'WITHOUT',\n];\n\nconst reservedCommands = [\n  'ADD',\n  'ALTER COLUMN',\n  'ALTER TABLE',\n  'CREATE TABLE',\n  'DROP TABLE',\n  'DELETE',\n  'DELETE FROM',\n  'FETCH FIRST',\n  'FETCH NEXT',\n  'FETCH PRIOR',\n  'FETCH LAST',\n  'FETCH ABSOLUTE',\n  'FETCH RELATIVE',\n  'FROM',\n  'GROUP BY',\n  'HAVING',\n  'INSERT INTO',\n  'LIMIT',\n  'OFFSET',\n  'ORDER BY',\n  'SELECT',\n  'SET SCHEMA',\n  'SET',\n  'UPDATE',\n  'VALUES',\n  'WHERE',\n  'WITH',\n  'WINDOW',\n  'PARTITION BY',\n];\n\nconst reservedBinaryCommands = [\n  'INTERSECT',\n  'INTERSECT ALL',\n  'INTERSECT DISTINCT',\n  'UNION',\n  'UNION ALL',\n  'UNION DISTINCT',\n  'EXCEPT',\n  'EXCEPT ALL',\n  'EXCEPT DISTINCT',\n];\n\n// joins - https://www.sqlite.org/syntax/join-operator.html\nconst reservedJoins = [\n  'JOIN',\n  'LEFT JOIN',\n  'LEFT OUTER JOIN',\n  'INNER JOIN',\n  'CROSS JOIN',\n  'NATURAL JOIN',\n  'NATURAL LEFT JOIN',\n  'NATURAL LEFT OUTER JOIN',\n  'NATURAL INNER JOIN',\n  'NATURAL CROSS JOIN',\n];\n\nconst reservedDependentClauses = ['WHEN', 'ELSE'];\n\nexport default class SqliteFormatter extends Formatter {\n  // https://www.sqlite.org/lang_expr.html\n  static operators = ['~', '->', '->>', '||', '<<', '>>', '=='];\n\n  tokenizer() {\n    return new Tokenizer({\n      reservedCommands,\n      reservedBinaryCommands,\n      reservedJoins,\n      reservedDependentClauses,\n      reservedKeywords: dedupe([...reservedKeywords, ...Object.values(reservedFunctions).flat()]),\n      stringTypes: [{ quote: \"''\", prefixes: ['X'] }],\n      identTypes: [`\"\"`, '``', '[]'],\n      // https://www.sqlite.org/lang_expr.html#parameters\n      positionalParams: true,\n      numberedParamTypes: ['?'],\n      namedParamTypes: [':', '@', '$'],\n      operators: SqliteFormatter.operators,\n    });\n  }\n}\n"],"mappings":"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"}